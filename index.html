<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <style type="text/css"></style>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="https://i.imgur.com/LgljRO8.png" type="image/png">
    <!-- Specify the URL of your icon image here -->
    <title>Markdown Editor</title>
    <style>
        /* CSS styles */
        body {
            font-family: 'Source Sans Pro', Arial, sans-serif;
            /* Include Arial in the font stack */
            margin: 0;
            padding: 0;
            background-color: #333;
            /* Dark mode background color */
            color: #fff;
            /* Dark mode text color */
        }

        header {
            background-color: #222;
            /* Dark mode header background color */
            padding: 5px;
            text-align: right;
        }

        .menu {
            margin-top: 10px;
        }

        .menu-item {
            font-family: Arial, sans-serif;
            /* Use Arial font */
            font-size: 12px;
            margin-right: 10px;
            cursor: pointer;
            color: #fff;
            /* Default text color */
            transition: color 0.3s;
        }

        .menu-item:hover {
            color: #00bcd4;
            /* Highlight text color on hover */
        }

        #editor-container {
            display: flex;
            height: 100vh;
        }

        #editor,
        #preview {
            flex: 1;
            height: 100%;
            padding: 10px;
            border: none;
            outline: none;
            font-family: 'Source Sans Pro', Arial, sans-serif;
        }

        #editor {
            font-size: 16px;
            background-color: #444;
            /* Dark mode editor background color */
            color: #fff;
            /* Dark mode editor text color */
            resize: none;
        }

        #preview {
            font-size: 14px;
            background-color: #555;
            /* Dark mode preview background color */
            overflow-y: auto;
            color: #fff;
            /* Dark mode preview text color */
        }
    </style>
</head>

<body>
    <header>
        <nav class="menu">
            <span class="menu-item" id="copy">Copy</span>
            <span class="menu-item" id="reset">Reset</span>
            <span class="menu-item" id="export-pdf">Export PDF</span>
            <a class="menu-item" id="affiliate-link" href="https://go.nordvpn.net/aff_c?offer_id=15&aff_id=92507" target="_blank">Get NordVPN</a>
        </nav>
    </header>

    <div id="editor-container">
        <textarea id="editor" placeholder="Type your Markdown here..."></textarea>
        <div id="preview"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
    <script>
        // JavaScript code
        document.addEventListener("DOMContentLoaded", function () {
            const editor = document.getElementById("editor");
            const output = document.getElementById("preview");

            // Function to update the preview
            function updatePreview() {
                // Get the Markdown text from the textarea
                const markdownText = editor.value;

                // Convert Markdown to HTML
                const converter = new showdown.Converter();
                const htmlText = converter.makeHtml(markdownText);

                // Update the HTML of the preview div
                output.innerHTML = htmlText;
            }

            // Event listeners for input changes
            editor.addEventListener("input", updatePreview);

            // Initialize the preview
            updatePreview();

            // Event listener for download menu item click
            document.getElementById("download").addEventListener("click", function () {
                const markdownText = editor.value;
                const blob = new Blob([markdownText], { type: "text/markdown" });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.href = url;
                a.download = "markdown.md";
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });

            // Event listener for copy menu item click
            document.getElementById("copy").addEventListener("click", function () {
                editor.select();
                document.execCommand("copy");
            });

            // Event listener for reset menu item click
            document.getElementById("reset").addEventListener("click", function () {
                editor.value = "";
                updatePreview();
            });
        });
    </script>
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("service-worker.js")
                .then(function (registration) {
                    console.log("Service Worker registered with scope:", registration.scope);
                })
                .catch(function (error) {
                    console.error("Service Worker registration failed:", error);
                });
        }

        // JavaScript code
        document.addEventListener("DOMContentLoaded", function () {
            const editor = document.getElementById("editor");
            const output = document.getElementById("preview");

            // Function to update the preview
            function updatePreview() {
                // Get the Markdown text from the textarea
                const markdownText = editor.value;

                // Convert Markdown to HTML
                const converter = new showdown.Converter();
                const htmlText = converter.makeHtml(markdownText);

                // Update the HTML of the preview div
                output.innerHTML = htmlText;
            }

            // Event listeners for input changes
            editor.addEventListener("input", updatePreview);

            // Initialize the preview
            updatePreview();

            // Event listener for "Export to PDF" menu item click
            document.getElementById("export-pdf").addEventListener("click", function () {
                // Open the browser's print dialog to save as PDF
                window.print();
            });

            // Event listener for "Download" menu item click
            document.getElementById("download").addEventListener("click", function () {
                const markdownText = editor.value;
                const blob = new Blob([markdownText], { type: "text/markdown" });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.href = url;
                a.download = "markdown.md";
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });

            // Event listener for "Copy" menu item click
            document.getElementById("copy").addEventListener("click", function () {
                editor.select();
                document.execCommand("copy");
            });

            // Event listener for "Reset" menu item click
            document.getElementById("reset").addEventListener("click", function () {
                editor.value = "";
                updatePreview();
            });
        });
    </script>
</body>

</html>
